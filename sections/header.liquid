{%- liquid
  assign main_menu = linklists[section.settings.main_menu_link_list]

  assign logo_alignment = 'left'
  assign nav_position = 'below'

  if section.settings.main_menu_alignment == 'left' or section.settings.main_menu_alignment == 'left-center'
    assign nav_position = 'beside'
  endif

  if section.settings.main_menu_alignment == 'center'
    assign logo_alignment = 'center'
  endif

  assign template_name = template | replace: '.', ' ' | truncatewords: 2, '' | handle

  assign overlay_header = false
  if template_name == 'index' and section.settings.sticky_index
    assign overlay_header = true
  endif
  if template_name contains 'collection' and collection.image and section.settings.sticky_collection
    assign overlay_header = true
  endif
-%}

<style>
  .site-nav__link {
    font-size: {{ settings.type_navigation_size }}px;
  }
  {% if settings.type_navigation_capitalize %}
    .site-nav__link {
      text-transform: uppercase;
      letter-spacing: 0.2em;
    }
  {% endif %}

  {% if mainmenu.length > 6 %}
    .site-nav__link {
      padding-left: 10px;
      padding-right: 10px;
    }
  {% endif %}

  {%- if settings.color_header == settings.color_body_bg or settings.color_body_bg contains settings.color_header -%}
    .site-header,
    .site-header__element--sub {
      box-shadow: 0 0 25px rgb(0 0 0 / 10%);
    }

    .is-light .site-header,
    .is-light .site-header__element--sub {
      box-shadow: none;
    }
  {%- endif -%}

  {%- if settings.color_header == settings.color_header_search -%}
    .site-header__search-form {
      border: 1px solid {{ settings.color_borders }}
    }
  {%- endif -%}
  {% comment %}--> Add Wish List {% endcomment %}
  .site-nav__link.site-nav__link--icon.account-label{
    margin-right: 10px;
  }
  {% comment %}<-- Add Wish List {% endcomment %}
   {% comment %}--> Header Update {% endcomment %}
  @media (max-width: 767px) {
    .icon-call {
      display: none;
    }
  }
  {% comment %}<-- Header Update {% endcomment %}

  /*-->Header/Footer and 5k Reviews*/
  #HeaderWrapper.header-wrapper:not(.is-light){
    background-image: url("{{ section.settings.header_back_desktop | img_url: 'master' }}");
    background-repeat: no-repeat;
    background-position: center;
    background-size: cover;
  }
  
  @media only screen and (max-width: 768px) {
    #HeaderWrapper.header-wrapper:not(.is-light){
      background-image: url("{{ section.settings.header_back_mobile | img_url: 'master' }}");
      background-repeat: no-repeat;
      background-position: top;
      background-size: cover;
    }
  }
  /*<--Header/Footer and 5k Reviews*/
</style>

<div data-section-id="{{ section.id }}" data-section-type="header">
  <div id="HeaderWrapper" class="header-wrapper{% if overlay_header %} header-wrapper--overlay is-light{% endif %}">
    <header
      id="SiteHeader"
      class="site-header{% if settings.type_navigation_style == 'heading' %} site-header--heading-style{% endif %}"
      data-sticky="{{ section.settings.header_sticky }}"
      data-overlay="{{ overlay_header }}">

      <div class="site-header__element site-header__element--top">
        <div class="page-width">
          <div class="header-layout" data-layout="{{ section.settings.main_menu_alignment }}" data-nav="{{ nav_position }}" data-logo-align="{{ logo_alignment }}">

            {% comment %} {%- if nav_position == 'below' and logo_alignment == 'left' -%}
              <div class="header-item header-item--compress-nav small--hide">
                <button type="button" class="site-nav__link site-nav__link--icon site-nav__compress-menu">
                  <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-hamburger" viewBox="0 0 64 64"><path class="cls-1" d="M7 15h51">.</path><path class="cls-1" d="M7 32h43">.</path><path class="cls-1" d="M7 49h51">.</path></svg>
                  <span class="icon__fallback-text">{{ 'general.drawers.navigation' | t }}</span>
                </button>
              </div>
            {%- endif -%} {% endcomment %}
            <div class="header-item header-item--icons-left medium-up-large--hide">
              {%- render 'header-icons-left', section: section, nav_position: nav_position -%}
            </div>

            {%- if logo_alignment == 'left' -%}
              <div class="header-item header-item--logo">
                {%- render 'header-logo-block', section: section -%}
              </div>
            {%- endif -%}

            {%- if nav_position == 'below' -%}
              <div class="header-item header-item--search small-med--hide">
                {% comment %} {%- if logo_alignment == 'center' -%}
                  <button type="button" class="site-nav__link site-nav__link--icon site-nav__compress-menu">
                    <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-hamburger" viewBox="0 0 64 64"><path class="cls-1" d="M7 15h51">.</path><path class="cls-1" d="M7 32h43">.</path><path class="cls-1" d="M7 49h51">.</path></svg>
                    <span class="icon__fallback-text">{{ 'general.drawers.navigation' | t }}</span>
                  </button>
                {%- endif -%} {% endcomment %}

                 {%- render 'header-search' -%} 
              </div>
            {%- endif -%}

            {%- if nav_position == 'beside' -%}
              <div class="header-item header-item--navigation{% if section.settings.main_menu_alignment == 'left-center' %} text-center{% endif %}">
                {%- render 'header-desktop-nav', main_menu: main_menu, nav_position: nav_position, show_mega_products: section.settings.mega_products -%}
              </div>
            {%- endif -%}

            {%- if logo_alignment == 'center' -%}
              <div class="header-item header-item--logo">
                {%- render 'header-logo-block', section: section -%}
              </div>
            {%- endif -%}

            <div class="header-item header-item--icons">
              <a href="{{ routes.cart_url }}"
                id="HeaderCartTrigger"
                aria-controls="HeaderCart"
                class="site-nav__link site-nav__link--icon js-no-transition mobile-cart-area"
                data-icon="{{ settings.cart_icon }}">
                <span class="cart-link">
                  {%- if settings.cart_icon == 'cart' -%}
                    <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-cart" viewBox="0 0 64 64"><defs><style>.cls-1{fill:none;stroke:#000;stroke-miterlimit:10;stroke-width:2px}</style></defs><path class="cls-1" d="M14 17.44h46.79l-7.94 25.61H20.96l-9.65-35.1H3"/><circle cx="27" cy="53" r="2"/><circle cx="47" cy="53" r="2"/></svg>
                  {%- elsif settings.cart_icon == 'bag-minimal' -%}
                    {% comment %} <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-bag-minimal" viewBox="0 0 64 64"><defs><style>.cls-1{fill:none;stroke:#000;stroke-width:2px}</style></defs><path id="svg_2" data-name="svg 2" class="cls-1" d="M22.53 16.61c0-7.1 4.35-9 9.75-9s9.75 1.9 9.75 9"/><path id="svg_4" data-name="svg 4" class="cls-1" d="M11.66 16.65h41.25V53.4H11.66z"/></svg> {% endcomment %}
                    {% comment %} --> Icons weight and sizing {% endcomment %}
                    {% comment %} <img src="https://cdn.shopify.com/s/files/1/1205/7108/files/Untitled_design_1_copy_2x_7d4250d6-6c60-46b6-b179-24692b9d7110.png?v=1679512384" style="width:27px;height:27px;"/> {% endcomment %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none">
                      <path d="M23 11H8.5L7 26H24.5L23 11Z" stroke="white" stroke-width="1.5"/>
                      <path d="M19 14V8.5C19 6.567 17.433 5 15.5 5V5C13.567 5 12 6.567 12 8.5V14" stroke="white" stroke-width="1.5"/>
                    </svg>
                    {% comment %} <-- Icons weight and sizing {% endcomment %}


                  {%- else -%}
                    <svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-bag" viewBox="0 0 64 64"><defs><style>.cls-1{fill:none;stroke:#000;stroke-width:2px}</style></defs><path class="cls-1" d="M24.23 18c0-7.75 3.92-14 8.75-14s8.74 6.29 8.74 14M14.74 18h36.51l3.59 36.73h-43.7z"/></svg>
                  {%- endif -%}
                  <span class="cart-link__bubble{% if cart.item_count > 0 %} cart-link__bubble--visible{% endif %}">
                    <span class="cart-link__bubble-num">{{ cart.item_count }}</span>
                  </span>
                </span>
                <span class="site-nav__icon-label small-med--hide {% if hide_icon_labels %} icon__fallback-text{% endif %}">
                  {{ 'layout.cart.title' | t }}
                </span>
              </a>
              {% comment %}--> Add Wish List {% endcomment %}
              {% comment %} <a href="/pages/custom-wishlist" class="swym-wishlist header-item--wishlist site-nav__link"> {% endcomment %}
              <a href="/pages/swym-wishlist" class="swym-wishlist header-item--wishlist site-nav__link">
                {% comment %} <a href="#swym-wishlist" class="swym-wishlist header-item--wishlist site-nav__link"> {% endcomment %}
                  {% comment %} <i aria-hidden="true" focusable="false" role="presentation" class="icon icon-swym-wishlist"></i> {% endcomment %}
                   {% comment %} --> Icons weight and sizing {% endcomment %}
                   <svg xmlns="http://www.w3.org/2000/svg" width="26" height="26" viewBox="0 0 22 21" fill="none">
  <path d="M15.7521 1.55274C17.0293 1.55274 18.2298 2.07937 19.133 3.03534C20.9972 5.00887 20.9972 8.22019 19.133 10.194L14.381 15.2249L11.0001 18.8039L7.61921 15.2246L2.86721 10.1937C1.00308 8.22019 1.00308 5.00887 2.86721 3.03508C3.77019 2.07912 4.9709 1.55248 6.24812 1.55248C7.52534 1.55248 8.72581 2.07912 9.62903 3.03508L9.96319 3.38885L11.0001 4.48689L12.0371 3.38911L12.3712 3.03534C13.2744 2.07912 14.4751 1.55274 15.7521 1.55274ZM15.7521 0C14.1532" fill="white"></path>                </svg> 
                  {% comment %} <-- Icons weight and sizing {% endcomment %}
                  <span class="small-med--hide">Wishlist</span>
                                      <span class="swym-hidden-counter"></span>
                </a>
                {% comment %}<-- Add Wish List {% endcomment %}
              {%- render 'header-icons', section: section, nav_position: nav_position -%}
            </div>
          </div>
        </div>

        {% comment %} Header Update: added hide class {% endcomment %}
        <div class="site-header__search-container hide">
          <div class="page-width">
            <div class="site-header__search">
              {%- render 'header-search' -%}
              <button type="button" class="text-link site-header__search-btn site-header__search-btn--cancel">
                <span class="medium-up--hide"><svg aria-hidden="true" focusable="false" role="presentation" class="icon icon-close" viewBox="0 0 64 64"><defs><style>.cls-1{fill:none;stroke:#000;stroke-miterlimit:10;stroke-width:2px}</style></defs><path class="cls-1" d="M19 17.61l27.12 27.13m0-27.13L19 44.74"/></svg></span>
                <span class="small--hide">{{ 'general.search.cancel' | t }}</span>
              </button>
            </div>
          </div>
        </div>
      </div>

      {%- if nav_position == 'below' -%}
        <div class="site-header__element site-header__element--sub is-active" data-type="nav">  
          {% comment %} <div class="page-width{% if logo_alignment == 'center' %} text-center{% endif %}"> {% endcomment %}
          <div class="page-width">
            {%- render 'header-desktop-nav', main_menu: main_menu, nav_position: nav_position, show_mega_products: section.settings.mega_products -%}
          </div>
        </div>

        <div class="site-header__element site-header__element--sub" data-type="search">
          <div class="page-width small--hide medium-down--hide medium-up-large--hide">
            {%- render 'header-search' -%}
          </div>
        </div>
      {%- endif -%} 

      <div class="page-width site-header__drawers">
        <div class="site-header__drawers-container">
          <div class="site-header__drawer site-header__cart" id="HeaderCart">
            <div class="site-header__drawer-animate">
              {%- render 'header-cart-drawer' -%}
            </div>
          </div>

          <div class="site-header__drawer site-header__mobile-nav medium-up-large--hide" id="MobileNav">
            <div class="site-header__drawer-animate">
              {%- render 'header-mobile-nav', main_menu: main_menu -%}
              
              {% comment %} {%- if section.settings.header_footer_menu -%}
                <div id="MobileNavFooter"></div>
              {%- endif -%} {% endcomment %}
            </div>
             
          </div>

         
        </div>
      </div>
    

      {%- if settings.predictive_search_enabled or settings.search_top_collection != blank -%}
        <div id="SearchResultsWrapper" class="site-header__search-results hide">
          {%- if settings.search_top_collection != blank -%}
            {%- assign search_collection = collections[settings.search_top_collection] -%}
            <div id="TopSearched" class="site-header__search-results-wrapper">
              <div class="page-width">
                <div class="h4 site-header__search-title">{{ 'general.search.search_title' | t }}</div>
              </div>
              <div class="page-width page-width--flush-small">
                <div class="new-grid product-grid scrollable-grid--small" data-view="scrollable">
                  {%- for product in search_collection.products limit: 6 -%}
                    {%- render 'product-grid-item', product: product, no_actions: true -%}
                  {%- endfor -%}
                </div>
              </div>
            </div>
          {%- endif -%}

          {%- if settings.predictive_search_enabled -%}
            <div id="PredictiveWrapper" class="hide" data-image-size="{{ settings.predictive_image_size }}">
              <div class="page-width">
                <div id="PredictiveResults" class="predictive-result__layout"></div>
                <div class="text-center predictive-results__footer">
                  <button type="button" class="btn btn--small btn-main" data-predictive-search-button>
                    <small>
                      {{ 'general.search.view_more' | t }}
                    </small>
                  </button>
                </div>
              </div>
            </div>
          {%- endif -%}
        </div>
      {%- endif -%}
    </header>
  </div>
</div>

{% comment %} /*-->Header/Footer and 5k Reviews*/ {% endcomment %}
{% schema %}
{
  "name": "t:sections.header.name",
  "class": "header-section",
  "settings": [
    {
      "type": "link_list",
      "id": "main_menu_link_list",
      "label": "t:sections.header.settings.main_menu_link_list.label",
      "default": "main-menu"
    },
    {
      "type": "image_picker",
      "id": "header_back_desktop",
      "label": "Desktop header background image"
    },
    {
      "type": "image_picker",
      "id": "header_back_mobile",
      "label": "Mobile header background image"
    },
    {
      "type": "select",
      "id": "main_menu_alignment",
      "label": "t:sections.header.settings.main_menu_alignment.label",
      "default": "below",
      "options": [
        {
          "value": "below",
          "label": "t:sections.header.settings.main_menu_alignment.options.below.label"
        },
        {
          "value": "left",
          "label": "t:sections.header.settings.main_menu_alignment.options.left.label"
        },
        {
          "value": "left-center",
          "label": "t:sections.header.settings.main_menu_alignment.options.left-center.label"
        },
        {
          "value": "center",
          "label": "t:sections.header.settings.main_menu_alignment.options.center.label"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "mega_products",
      "label": "t:sections.header.settings.mega_products.label",
      "info": "t:sections.header.settings.mega_products.info",
      "default": true
    },
    {
      "type": "checkbox",
      "id": "header_sticky",
      "label": "t:sections.header.settings.header_sticky.label",
      "default": true,
      "info": "t:sections.header.settings.header_sticky.info"
    },
    {
      "type": "checkbox",
      "id": "header_footer_menu",
      "label": "t:sections.header.settings.header_footer_menu.label",
      "default": true,
      "info": "t:sections.header.settings.header_footer_menu.info"
    },
    {
      "type": "checkbox",
      "id": "sticky_index",
      "label": "t:sections.header.settings.sticky_index.label",
      "default": false
    },
    {
      "type": "checkbox",
      "id": "sticky_collection",
      "label": "t:sections.header.settings.sticky_collection.label",
      "info": "t:sections.header.settings.sticky_collection.info",
      "default": false
    },
        {
      "type": "header",
      "content": "Mega Menu Glass Tile"
    },
    {
      "type": "text",
      "id": "mm_glass_text1",
      "label": "Glass Tile #1 text",
      "default": "SHOP ALL"
    },
    {
      "type": "url",
      "id": "mm_glass_link1",
      "label": "Glass Tile #1 link"
    },
    {
      "type": "text",
      "id": "mm_glass_text2",
      "label": "Glass Tile #2 text",
      "default": "Popular trends"
    },
    {
      "type": "url",
      "id": "mm_glass_link2",
      "label": "Glass Tile #2 link"
    },
    {
      "type": "image_picker",
      "id": "mm_glass_image",
      "label": "Glass Tile image"
    },
    {
      "type": "header",
      "content": "Mega Menu Porcelain Tile"
    },
    {
      "type": "text",
      "id": "mm_porcelain_text1",
      "label": "Porcelain Tile #1 text",
      "default": "SHOP ALL"
    },
    {
      "type": "url",
      "id": "mm_porcelain_link1",
      "label": "Porcelain Tile #1 link"
    },
    {
      "type": "text",
      "id": "mm_porcelain_text2",
      "label": "Porcelain Tile #2 text",
      "default": "Popular trends"
    },
    {
      "type": "url",
      "id": "mm_porcelain_link2",
      "label": "Porcelain Tile #2 link"
    },
    {
      "type": "image_picker",
      "id": "mm_porcelain_image",
      "label": "Porcelain Tile image"
    },
    {
      "type": "header",
      "content": "Mega Menu Stone Tile"
    },
    {
      "type": "text",
      "id": "mm_stone_text1",
      "label": "Stone Tile #1 text",
      "default": "SHOP ALL"
    },
    {
      "type": "url",
      "id": "mm_stone_link1",
      "label": "Stone Tile #1 link"
    },
    {
      "type": "text",
      "id": "mm_stone_text2",
      "label": "Stone Tile #2 text",
      "default": "Popular trends"
    },
    {
      "type": "url",
      "id": "mm_stone_link2",
      "label": "Stone Tile #2 link"
    },
    {
      "type": "image_picker",
      "id": "mm_stone_image",
      "label": "Stone Tile image"
    },
    {
      "type": "header",
      "content": "Mega Menu Pool Mosaics"
    },
    {
      "type": "text",
      "id": "mm_mosaics_text1",
      "label": "Pool Mosaics #1 text",
      "default": "SHOP ALL"
    },
    {
      "type": "url",
      "id": "mm_mosaics_link1",
      "label": "Pool Mosaics #1 link"
    },
    {
      "type": "text",
      "id": "mm_mosaics_text2",
      "label": "Pool Mosaics #2 text",
      "default": "Popular trends"
    },
    {
      "type": "url",
      "id": "mm_mosaics_link2",
      "label": "Pool Mosaics #2 link"
    },
    {
      "type": "image_picker",
      "id": "mm_mosaics_image",
      "label": "Pool Mosaics image"
    },
    {
      "type": "header",
      "content": "Mega Menu Outdoor Living"
    },
    {
      "type": "text",
      "id": "mm_outdoor_text1",
      "label": "Outdoor Living #1 text",
      "default": "SHOP ALL"
    },
    {
      "type": "url",
      "id": "mm_outdoor_link1",
      "label": "Outdoor Living #1 link"
    },
    {
      "type": "text",
      "id": "mm_outdoor_text2",
      "label": "Outdoor Living #2 text",
      "default": "Popular trends"
    },
    {
      "type": "url",
      "id": "mm_outdoor_link2",
      "label": "Outdoor Living #2 link"
    },
    {
      "type": "image_picker",
      "id": "mm_outdoor_image",
      "label": "Outdoor Living image"
    }       
  ],
  "blocks": [
    {
      "type": "logo",
      "name": "t:sections.header.blocks.logo.name",
      "limit": 1,
      "settings": [
        {
          "type": "image_picker",
          "id": "logo",
          "label": "t:sections.header.blocks.logo.settings.logo.label"
        },
        {
          "type": "image_picker",
          "id": "logo-inverted",
          "label": "t:sections.header.blocks.logo.settings.logo-inverted.label",
          "info": "t:sections.header.blocks.logo.settings.logo-inverted.info"
        },
        {
          "type": "range",
          "id": "desktop_logo_width",
          "label": "t:sections.header.blocks.logo.settings.desktop_logo_width.label",
          "default": 200,
          "min": 100,
          "max": 400,
          "step": 10,
          "unit": "px"
        },
        {
          "type": "range",
          "id": "mobile_logo_width",
          "label": "t:sections.header.blocks.logo.settings.mobile_logo_width.label",
          "default": 140,
          "min": 60,
          "max": 200,
          "step": 10,
          "unit": "px",
          "info": "t:sections.header.blocks.logo.settings.mobile_logo_width.info"
        }
      ]
    }
  ],
  "default": {
    "settings": {}
  }
}
{% endschema %}
